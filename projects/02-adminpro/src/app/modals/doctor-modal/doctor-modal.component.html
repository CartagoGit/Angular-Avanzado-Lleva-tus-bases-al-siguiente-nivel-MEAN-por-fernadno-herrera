<div class="modal__body row">
	<div class="col-6">
		<div
			#inputUserGroup
			class="form-group"
			(focus)="onFocus($event, inputUserGroup)"
			(blur)="onBlur($event, inputUserGroup)"
		>
		<!-- TODO Solucionar problema con el blut y el focus que abre el desplegable -->
			<!-- (blur)="userInputFocused.set(false)" -->
			<label for="name">User</label>
			<!-- (blur)="onBlur($event, inputUserGroup)"
			(focus)="userInputFocused.set(true)" -->
			<input
				#userInput
				type="text"
				class="form-control"
				id="name"
				placeholder="Name"
				[value]="data ? data.user.name : ''"
				[disabled]="userSelected() !== undefined"
			/>

			<span
				class="remove-user"
				[hidden]="data || userSelected() === undefined"
				(click)="userSelected.set(undefined); getUsers(userInput.value)"
			>
				<i class="fa fa-close text-danger"> </i>
			</span>
			<div
				class="user-options"
				[hidden]="userOptions().length === 0 || !userInputFocused()"
			>
				<div
					class="user-option"
					*ngFor="let user of userOptions()"
					(click)="selectUser(user)"
				>
					{{ user.name }}
				</div>
			</div>
			<span class="error-message" [hidden]="!errors().user.isError">{{
				errors().user.message
			}}</span>
		</div>
		<div class="form-group">
			<label for="hospitals">Hospitals</label>
			<div class="combo-hospital d-flex w-100">
				<!-- size="5" -->
				<select
					name="hospitals"
					#hospitalSelect
					class="form-control hospital-select"
					[disabled]="hospitalsUnselected().length === 0"
				>
					<option
						*ngFor="
							let hospital of (hospitalsUnselected().length !== 0
								? hospitalsUnselected()
								: [{ name: 'There are not hospitals' }]
							) | orderBy : 'name'
						"
						[value]="hospital.id"
					>
						{{ hospital.name }}
					</option>
				</select>
				<button
					class="btn btn-secondary"
					(click)="addHospital(hospitalSelect.value)"
				>
					Add hospital
				</button>
			</div>
		</div>
		<div class="form-group">
			<label for="selectedHospitals">Hospitals where doctor works</label>
			<div class="hospitals-list">
				<div
					name="selectedHospitals"
					*ngFor="let hospital of hospitalsSelected() | orderBy : 'name'"
					class="hospital-row d-flex justify-content-between w-100 p2 px-4"
				>
					<span>{{ hospital.name }}</span>
					<span
						class="pointer"
						data-toggle="tooltip"
						data-original-title="remove"
						title="Remove"
						(click)="clickRemoveHospital(hospital.id)"
					>
						<i class="fa fa-close text-danger"></i>
					</span>
				</div>
			</div>
			<span [hidden]="!errors().hospitals.isError" class="error-message">{{
				errors().hospitals.message
			}}</span>
			<!-- hidden -->
		</div>
	</div>
	<div class="col-6 d-flex">
		<div class="form-group image-field">
			<div class="image-preview h-100">
				<label for="logo">Image</label>
				<div class="modal__image-container d-flex align-items-center h-100">
					<img
						class="modal__image"
						[src]="
							(!!images().length && images()[0].url) ||
								data?.dataImages?.defaultImgSrc ||
								defaultImage | safe
						"
						alt="image selected"
					/>
				</div>
			</div>

			<!-- [file]="imageSelected()" -->
			<app-input-file
				(fileChanged)="imageChanged($event)"
				[format]="'image'"
				class="mt-auto"
			>
			</app-input-file>
		</div>
	</div>
</div>
<div class="modal__footer">
	<ng-container [ngSwitch]="kindModal">
		<button
			*ngSwitchCase="'create'"
			type="button"
			class="btn btn-primary"
			(click)="isFormValid() && createDoctor()"
			[ngClass]="{
				disabled: !isFormValid()
			}"
		>
			Create new doctor
		</button>
		<button
			*ngSwitchCase="'update'"
			type="button"
			class="btn btn-info"
			(click)="isFormValid() && updateDoctor()"
			[ngClass]="{
				disabled: !isFormValid()
			}"
		>
			Update doctor
		</button>
	</ng-container>

	<button type="button" class="btn btn-default" (click)="close()">
		Close
	</button>
</div>
